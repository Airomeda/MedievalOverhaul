<?xml version="1.0" encoding="utf-8" ?>
<Defs>
	<ThingDef ParentName="MakeableDrugBase">
		<defName>DankPyon_Nikkaf</defName>
		<label>nikkaf</label>
		<description>PLACEHOLDER</description>
		<possessionCount>10</possessionCount>
		<descriptionHyperlinks><HediffDef>DankPyon_High_Nikkaf</HediffDef></descriptionHyperlinks>
		<graphicData>
			<texPath>Drug/Nikkaf</texPath>
			<graphicClass>Graphic_StackCount</graphicClass>
		</graphicData>
		<socialPropernessMatters>true</socialPropernessMatters>
		<rotatable>false</rotatable>
		<statBases>
			<Mass>0.5</Mass>
			<Flammability>0.1</Flammability>
		</statBases>
		<techLevel>Medieval</techLevel>
		<ingestible>
			<foodType>Fluid, Processed</foodType>
			<joyKind>Chemical</joyKind>
			<joy>0.20</joy>
			<baseIngestTicks>210</baseIngestTicks>
			<nurseable>true</nurseable>
			<drugCategory>Hard</drugCategory>
			<ingestSound>Ingest_Drink</ingestSound>
			<ingestHoldOffsetStanding>
				<northDefault>
				<offset>(0.18,0,0)</offset>
				</northDefault>
			</ingestHoldOffsetStanding>
			<ingestHoldUsesTable>false</ingestHoldUsesTable>
			<ingestCommandString>Drink {0}</ingestCommandString>
			<ingestReportString>Drinking {0}.</ingestReportString>
			<outcomeDoers>
				<li Class="IngestionOutcomeDoer_GiveHediff">
					<hediffDef>DankPyon_High_Nikkaf</hediffDef>
					<severity>0.5</severity>
					<toleranceChemical>DankPyon_Chemical_Nikkaf</toleranceChemical>
				</li>
				<li Class="IngestionOutcomeDoer_OffsetNeed">
					<need>Rest</need>
					<offset>0.5</offset>
					<toleranceChemical>DankPyon_Chemical_Nikkaf</toleranceChemical>
				</li>
					<li Class="IngestionOutcomeDoer_OffsetPsyfocus">
					<offset>0.15</offset>
				</li>
			</outcomeDoers>
		</ingestible>
		
		<comps>
			<li Class="CompProperties_Drug">
				<chemical>DankPyon_Chemical_Nikkaf</chemical>
				<addictiveness>0.012</addictiveness>
				<existingAddictionSeverityOffset>0.20</existingAddictionSeverityOffset>
				<needLevelOffset>0.9</needLevelOffset>
				<isCombatEnhancingDrug>false</isCombatEnhancingDrug>
				<listOrder>200</listOrder>
				<overdoseSeverityOffset>0.18~0.35</overdoseSeverityOffset>
				<largeOverdoseChance>0.005</largeOverdoseChance>
			</li>
		</comps>

		<recipeMaker>
			<researchPrerequisite>DankPyon_Alchemy</researchPrerequisite>
			<recipeUsers>
				<li>DankPyon_Cauldron</li>
			</recipeUsers>
			<soundWorking>Recipe_Drug</soundWorking>
			<displayPriority>1500</displayPriority>
		</recipeMaker>
		<costList>
			<DankPyon_Mixture_Nikkaf>1</DankPyon_Mixture_Nikkaf>
		</costList>
	</ThingDef>
  
  	<HediffDef>
		<defName>DankPyon_High_Nikkaf</defName>
		<hediffClass>Hediff_High</hediffClass>
		<label>high on nikkaf</label>
		<labelNoun>a nikkaf high</labelNoun>
		<description>Nikkaf in the bloodstream. It greatly enhances memory, learning capacity, and slightly increases psyfocus when first drank.</description>
		<defaultLabelColor>(1,0,0.5)</defaultLabelColor>
		<scenarioCanAdd>true</scenarioCanAdd>
		<maxSeverity>1.0</maxSeverity>
		<isBad>false</isBad>
		<comps>
		<li Class="HediffCompProperties_SeverityPerDay">
			<severityPerDay>-1</severityPerDay>
			<showHoursToRecover>true</showHoursToRecover>
		</li>
		</comps>
		<stages>
			<li>
				<hungerRateFactorOffset>-0.25</hungerRateFactorOffset>
				<painFactor>1.2</painFactor>
				<statFactors>
					<RestFallRateFactor>0.5</RestFallRateFactor>
					<GlobalLearningFactor>0.25</GlobalLearningFactor>
				</statFactors>

				<capMods>
					<li>
					<capacity>Consciousness</capacity>
					<offset>0.20</offset>
					</li>
					<li>
					<capacity>Sight</capacity>
					<offset>0.15</offset>
					</li>
				</capMods>
			</li>
		</stages>
	</HediffDef>

	<ThoughtDef>
		<defName>DankPyon_Thought_Nikkaf</defName>
		<workerClass>ThoughtWorker_Hediff</workerClass>
		<hediff>DankPyon_High_Nikkaf</hediff>
		<validWhileDespawned>true</validWhileDespawned>
		<developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
		<stages>
		<li>
			<label>high on nikkaf</label>
			<description>My mind is clear, with each second, telling me to seek knowledge.</description>
			<baseMoodEffect>3</baseMoodEffect>
		</li>
		</stages>
	</ThoughtDef>

	<ChemicalDef>
		<defName>DankPyon_Chemical_Nikkaf</defName>
		<label>nikkaf</label>
		<addictionHediff>DankPyon_Addiction_Nikkaf</addictionHediff>
		<geneOverdoseChanceFactorResist>0.5</geneOverdoseChanceFactorResist>
		<geneOverdoseChanceFactorImmune>0</geneOverdoseChanceFactorImmune>
	</ChemicalDef>

	<NeedDef ParentName="DrugAddictionNeedBase">
		<defName>DankPyon_Need_Nikkaf</defName>
		<needClass>Need_Chemical</needClass>
		<label>nikkaf</label>
		<description>Because of a nikkaf addiction, this person needs to regularly consume the drug to avoid withdrawal symptoms.</description>
		<fallPerDay>0.333</fallPerDay>
		<listPriority>45</listPriority>
	</NeedDef>

	<HediffDef ParentName="AddictionBase">
		<defName>DankPyon_Addiction_Nikkaf</defName>
		<label>nikkaf addiction</label>
		<description>A chemical addiction to nikkaf. Long-term presence of nikkaf has caused neurological adaptations at the cellular level, so the brain can no longer function properly without the drug.
	\nWithout regular doses of nikkaf, withdrawal symptoms will begin. However, extended abstinence will force the brain to adapt back to its normal state, resolving the addiction.</description>
		<hediffClass>Hediff_Addiction</hediffClass>
		<causesNeed>DankPyon_Need_Nikkaf</causesNeed>
		<comps>
		<li Class="HediffCompProperties_SeverityPerDay">
			<severityPerDay>-0.045</severityPerDay>
			<showDaysToRecover>true</showDaysToRecover>
		</li>
		</comps>
		<stages>
		<li>
		</li>
		<li>
			<label>withdrawal</label>
			<painFactor>2</painFactor>
			<hungerRateFactorOffset>0.3</hungerRateFactorOffset>
			<statOffsets>
				<RestFallRateFactor>0.3</RestFallRateFactor>
			</statOffsets>
			<capMods>
			<li>
				<capacity>Consciousness</capacity>
				<offset>-0.20</offset>
			</li>
			<li>
				<capacity>Moving</capacity>
				<offset>-0.30</offset>
			</li>
			<li>
				<capacity>Sight</capacity>
				<offset>-0.20</offset>
			</li>
			<li>
				<capacity>BloodPumping</capacity>
				<offset>-0.10</offset>
			</li>
			<li>
				<capacity>Manipulation</capacity>
				<offset>-0.10</offset>
			</li>
			</capMods>
			<mentalStateGivers>
			<li>
				<mentalState>Binging_DrugExtreme</mentalState>
				<mtbDays>40</mtbDays>
			</li>
			<li>
				<mentalState>Wander_Psychotic</mentalState>
				<mtbDays>10</mtbDays>
			</li>
			</mentalStateGivers>
		</li>
		</stages>
	</HediffDef>

	<ThoughtDef>
		<defName>DankPyon_Withdrawal_Nikkaf</defName>
		<workerClass>ThoughtWorker_Hediff</workerClass>
		<hediff>DankPyon_Addiction_Nikkaf</hediff>
		<validWhileDespawned>true</validWhileDespawned>
		<developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
		<stages>
		<li>
			<visible>false</visible>
		</li>
		<li>
			<label>Nikkaf withdrawal</label>
			<description>I'm all fuzzy and can't think straight. My limbs feel heavy, I'm tired and hungry, everything hurts. And why won't my eyes focus properly?</description>
			<baseMoodEffect>-22</baseMoodEffect>
		</li>
		</stages>
	</ThoughtDef>

	<HediffDef ParentName="DrugToleranceBase">
		<defName>DankPyon_Tolerance_Nikkaf</defName>
		<label>nikkaf tolerance</label>
		<description>A built-up tolerance to nikkaf. The more severe this tolerance is, the more nikkaf it takes to get the same effect.</description>
		<comps>
		<li Class="HediffCompProperties_SeverityPerDay">
			<severityPerDay>-0.015</severityPerDay>
		</li>
		<li Class="HediffCompProperties_DrugEffectFactor">
			<chemical>DankPyon_Chemical_Nikkaf</chemical>
		</li>
		</comps>
		<hediffGivers>
		<li Class="HediffGiver_RandomDrugEffect">
			<hediff>ChemicalDamageModerate</hediff>
			<severityToMtbDaysCurve>
			<points>
				<li>(0.45, 99999)</li>
				<li>(0.5, 120)</li>
				<li>(1, 90)</li>
			</points>
			</severityToMtbDaysCurve>
			<partsToAffect>
			<li>Brain</li>
			</partsToAffect>
		</li>
		</hediffGivers>
	</HediffDef>

</Defs>
