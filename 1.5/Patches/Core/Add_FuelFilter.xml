<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[comps/li[@Class="CompProperties_Refuelable"][not(fuelLabel)]/fuelFilter/thingDefs/li[.="WoodLog"]][not(defName[.="PassiveCooler"])]/comps/li[@Class="CompProperties_Refuelable"]/fuelFilter/thingDefs[li="WoodLog"]</xpath>
		<value>
			<li>DankPyon_Coal</li>
			<li>DankPyon_Tar</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef/comps/li[@Class="CompProperties_Refuelable"]/fuelFilter[thingDefs[li="DankPyon_Coal"]]/categories</xpath>
		<match Class="PatchOperationAdd">
			<xpath>Defs/ThingDef/comps/li[@Class="CompProperties_Refuelable"]/fuelFilter[thingDefs[li="DankPyon_Coal"]]/categories</xpath>
			<value>
				<li>DankPyon_RawWood</li>
				<li>DankPyon_Wood</li>
			</value>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef/comps/li[@Class="CompProperties_Refuelable"]/fuelFilter[thingDefs[li="DankPyon_Coal"]]</xpath>
			<value>
				<categories>
					<li>DankPyon_RawWood</li>
					<li>DankPyon_Wood</li>
				</categories>
			</value>
		</nomatch>
	</Operation>

	<!-- If there is no inspector tab, add inspector tab AND MedievalOverhaul.ITab_Fuel-->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[comps/li[@Class="CompProperties_Refuelable"][fuelFilter/thingDefs/li="DankPyon_Coal"]][not(inspectorTabs)][not (@ParentName="TorchLamp")]</xpath>
		<match Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[comps/li[@Class="CompProperties_Refuelable"][fuelFilter/thingDefs/li="DankPyon_Coal"]][not(inspectorTabs)][not (@ParentName="TorchLamp")]</xpath>
			<value>
				<inspectorTabs>
					<li>MedievalOverhaul.ITab_FuelCustom</li>
				</inspectorTabs>
			</value>
		</match>
	</Operation>

	<!-- <Operation Class="PatchOperationConditional"> -->
	<!-- <xpath>Defs/ThingDef[comps/li[@Class="CompProperties_Refuelable"][fuelFilter/thingDefs/li="DankPyon_Coal"]][not (@ParentName="TorchLamp")]/inspectorTabs</xpath> -->
	<!-- <match Class="PatchOperationAdd"> -->
	<!-- <xpath>Defs/ThingDef[comps/li[@Class="CompProperties_Refuelable"][fuelFilter/thingDefs/li="DankPyon_Coal"]][not (@ParentName="TorchLamp")]/inspectorTabs</xpath> -->
	<!-- <value> -->
	<!-- <li>MedievalOverhaul.ITab_FuelCustom</li> -->
	<!-- </value> -->
	<!-- </match> -->
	<!-- </Operation> -->
	
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[thingClass[.="Building_WorkTable"]][comps/li[@Class="CompProperties_Refuelable"]/fuelFilter/thingDefs[li="DankPyon_Coal"]]/thingClass</xpath>
		<value>
			<thingClass>MedievalOverhaul.Building_WorkTableCustom</thingClass>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[thingClass[.="Building_WorkTable_HeatPush"]][comps/li[@Class="CompProperties_Refuelable"]/fuelFilter/thingDefs[li="DankPyon_Coal"]]/thingClass</xpath>
		<value>
			<thingClass>MedievalOverhaul.Building_WorkTable_HeatPushCustom</thingClass>
		</value>
	</Operation>

	<Operation Class="PatchOperationAttributeSet">
		<xpath>Defs/ThingDef[comps/li[@Class="CompProperties_Refuelable"]/fuelFilter/thingDefs[li="DankPyon_Coal"] and not(comps/li[@Class="CompProperties_Power"]) and not(defName[.="PassiveCooler"])]/comps/li[@Class="CompProperties_Refuelable"]</xpath>
		<attribute>Class</attribute>
		<value>MedievalOverhaul.CompProperties_RefuelableCustom</value>
	</Operation>

</Patch>
